- name: check logspout is running
  command: docker ps | grep logspout
  register: logspout_running_status
  ignore_errors: True

- name: Stop logspout
  command: docker stop logspout
  when: logspout_running_status is passed

- name: Remove logspout
  command: docker rm logspout
  when: logspout_running_status is failed
  ignore_errors: True

- name: start logspout
  command: docker run -d --restart always --name logspout -v /var/run/docker.sock:/tmp/docker.sock gliderlabs/logspout syslog://10.5.33.42:5000
  when: logspout_status is failed